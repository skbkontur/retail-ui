.publish-base:
  extends:
    - .cache_pull
  stage: publish
  needs: [Install Deps]
  before_script:
    - npm config set "//registry.npmjs.org/:_authToken" "${NPM_TOKEN}"
  script:
    - source .gitlab/ci/scripts/publish/release.sh $WORKSPACE
  after_script:
    - npm config delete "//registry.npmjs.org/:_authToken"

React UI Publish:
  extends:
    - .publish-base
    - .react-ui-workspace
  stage: publish
  rules:
    - if: $CI_COMMIT_TAG =~ $REACT_UI_RELEASE_TAG_REGEXP
    - if: $CI_COMMIT_TAG !~ $RELEASE_TAG_REGEXP
      when: manual

Validations Publish:
  extends:
    - .publish-base
    - .react-ui-validations-workspace
  stage: publish
  rules:
    - if: $CI_COMMIT_TAG =~ $VALIDATIONS_RELEASE_TAG_REGEXP
