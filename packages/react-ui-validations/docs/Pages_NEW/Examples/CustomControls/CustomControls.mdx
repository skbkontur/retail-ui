import { Story } from '@storybook/blocks';
import * as DocsStories from './CustomControls.docs.stories.tsx';
import { Meta } from '../../../../.storybook-docs/Meta';
import { Link } from '@skbkontur/react-ui/components/Link';
import { linkTo } from '@storybook/addon-links';

<Meta of={DocsStories} />

# Кастомные Контролы

Валидации можно использовать с собственными контролами. Или с обёртками над контролами из библиотеки [React UI](https://github.com/skbkontur/retail-ui/).

Для этого в таком контроле/обёртке необходимо обеспечить следующие пропсы:

1. `ref` - DOM элемент нужен для правильной авто-прокрутки страницы до элемента с ошибкой (<Link onClick={linkTo('Displaying/Scroll to validation')}>подробнее</Link>).
2. `error` - сеттит true, для соответствующего уровня валидации.
3. `warning` - сеттит true, для соответствующего уровня валидации.
4. `onBlur` - обеспечивает работу зависимых валидаций (<Link onClick={linkTo('Validator/Dependent')}>подробнее</Link>).
5. `onChange` - отслеживается начало процесса ввода данных.

В типах их можно представить так:

```jsx static
interface CustomControlProps<Elem = HTMLElement> {
  ref?: React.ForwardedRef<Elem>;
  error?: boolean;
  warning?: boolean;
  onBlur?: React.FocusEventHandler<Elem>;
  onChange?: React.ChangeEventHandler<Elem>;
}
```

Для контролов `react-ui` также прокидывается проп `onValueChange`. Чтобы избежать предупреждения в консоле (`Unknown event handler property 'onValueChange'`), этот проп можно "вырезать" из пропсов (см. пример).

### Пример

<Story of={DocsStories.CustomControls} />
